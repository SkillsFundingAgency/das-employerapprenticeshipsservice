{
  "NServiceBus.MessageId": "31287a8a-4961-47c9-b613-a90e00c1fb16",
  "NServiceBus.MessageIntent": "Send",
  "NServiceBus.ConversationId": "4dedc46a-642a-4829-9797-a90e00c1fb1a",
  "NServiceBus.CorrelationId": "31287a8a-4961-47c9-b613-a90e00c1fb16",
  "NServiceBus.OriginatingMachine": "ELLIOTS-MACBOOK",
  "NServiceBus.OriginatingEndpoint": "SFA.DAS.EAS.Web",
  "$.diagnostics.originating.hostid": "d49a7ae7b8d1e38387602ba6d478e421",
  "NServiceBus.ReplyToAddress": "SFA.DAS.EAS.Web",
  "NServiceBus.ContentType": "application\/json",
  "NServiceBus.EnclosedMessageTypes": "NServiceBus.ScheduledTask, NServiceBus.Core, Version=7.0.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c",
  "NServiceBus.Version": "7.0.1",
  "NServiceBus.TimeSent": "2018-06-29 11:46:15:944882 Z",
  "NServiceBus.ExceptionInfo.ExceptionType": "StructureMap.Building.StructureMapBuildException",
  "NServiceBus.Retries.Timestamp": "2018-06-29 11:57:06:925161 Z",
  "NServiceBus.ExceptionInfo.InnerExceptionType": "System.InvalidOperationException",
  "NServiceBus.ExceptionInfo.HelpLink": null,
  "NServiceBus.ExceptionInfo.Message": "Error while building type SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext.  See the inner exception for details\u000d\u000a1.) new EmployerAccountDbContext(*Default of IUnitOfWorkContext*)\u000d\u000a2.) SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext\u000d\u000a3.) Instance of SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext\u000d\u000a4.) Container.GetInstance(SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext)\u000d\u000a",
  "NServiceBus.ExceptionInfo.Source": "Anonymously Hosted DynamicMethods Assembly",
  "NServiceBus.ExceptionInfo.StackTrace": "StructureMap.Building.StructureMapBuildException: Error while building type SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext.  See the inner exception for details\u000d\u000a1.) new EmployerAccountDbContext(*Default of IUnitOfWorkContext*)\u000d\u000a2.) SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext\u000d\u000a3.) Instance of SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext\u000d\u000a4.) Container.GetInstance(SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext)\u000d\u000a ---> System.InvalidOperationException: The transaction passed in must have a non-null connection. A null connection indicates the transaction has already been completed.\u000d\u000a   at System.Data.Entity.Core.EntityClient.EntityConnection.UseStoreTransaction(DbTransaction storeTransaction)\u000d\u000a   at System.Data.Entity.Database.UseTransaction(DbTransaction transaction)\u000d\u000a   at SFA.DAS.EAS.Infrastructure.Data.EmployerAccountDbContext..ctor(IUnitOfWorkContext connectionContext) in C:\\Projects\\das-employerapprenticeshipsservice\\src\\SFA.DAS.EmployerApprenticeshipsService.Infrastructure\\Data\\EmployerAccountDbContext.cs:line 38\u000d\u000a   at lambda_method(Closure , IBuildSession , IContext )\u000d\u000a   --- End of inner exception stack trace ---\u000d\u000a   at lambda_method(Closure , IBuildSession , IContext )\u000d\u000a   at StructureMap.Building.BuildPlan.Build(IBuildSession session, IContext context)\u000d\u000a   at StructureMap.Pipeline.LazyLifecycleObject`1.CreateValue()\u000d\u000a   at StructureMap.SessionCache.GetObject(Type pluginType, Instance instance, ILifecycle lifecycle)\u000d\u000a   at StructureMap.SessionCache.GetDefault(Type pluginType, IPipelineGraph pipelineGraph)\u000d\u000a   at StructureMap.Container.GetInstance(Type pluginType)\u000d\u000a   at NServiceBus.CommonObjectBuilder.Build[T]()\u000d\u000a   at SFA.DAS.NServiceBus.EntityFramework.UnitOfWorkBehavior`1.SaveChanges(IIncomingLogicalMessageContext context) in C:\\Projects\\das-employerapprenticeshipsservice\\src\\SFA.DAS.NServiceBus\\EntityFramework\\UnitOfWorkBehavior.cs:line 30\u000d\u000a   at SFA.DAS.NServiceBus.EntityFramework.UnitOfWorkBehavior`1.<Invoke>d__0.MoveNext() in C:\\Projects\\das-employerapprenticeshipsservice\\src\\SFA.DAS.NServiceBus\\EntityFramework\\UnitOfWorkBehavior.cs:line 15\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.DeserializeLogicalMessagesConnector.<Invoke>d__1.MoveNext()\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.ProcessingStatisticsBehavior.<Invoke>d__0.MoveNext()\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.AzureServiceBus.TransactionScopeSuppressBehavior.<Invoke>d__0.MoveNext()\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.TransportReceiveToPhysicalMessageProcessingConnector.<Invoke>d__1.MoveNext()\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.MainPipelineExecutor.<Invoke>d__1.MoveNext()\u000d\u000a--- End of stack trace from previous location where exception was thrown ---\u000d\u000a   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\u000d\u000a   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\u000d\u000a   at NServiceBus.LearningTransportMessagePump.<ProcessFile>d__9.MoveNext()",
  "NServiceBus.TimeOfFailure": "2018-06-29 11:57:44:150781 Z",
  "NServiceBus.FailedQ": "SFA.DAS.EAS.Web",
  "NServiceBus.ProcessingMachine": "ELLIOTS-MACBOOK",
  "NServiceBus.ProcessingEndpoint": "SFA.DAS.EAS.Web",
  "$.diagnostics.hostid": "d49a7ae7b8d1e38387602ba6d478e421",
  "$.diagnostics.hostdisplayname": "ELLIOTS-MACBOOK"
}