using System.Threading.Tasks;
using MediatR;
using SFA.DAS.Activities.Client;

namespace SFA.DAS.EAS.Application.Queries.GetLatestActivities
{
    public class GetLatestActivitiesQueryHandler : IAsyncRequestHandler<GetLatestActivitiesQuery, GetLatestActivitiesResponse>
    {
        private readonly IActivitiesClient _activitiesClient;

        public GetLatestActivitiesQueryHandler(IActivitiesClient activitiesClient)
        {
            _activitiesClient = activitiesClient;
        }

        public async Task<GetLatestActivitiesResponse> Handle(GetLatestActivitiesQuery message)
        {
            var result = await _activitiesClient.GetLatestActivities(message.AccountId);

            return new GetLatestActivitiesResponse
            {
                Result = result
            };
        }
    }
}