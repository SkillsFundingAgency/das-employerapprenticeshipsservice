@using System.Text
@model SFA.DAS.EAS.Web.ViewModels.ManageApprenticeships.ApprenticeshipFiltersViewModel
    
<div class="option-select-label">Status</div>
<br />

@RenderFilterOptions("Status", Model.ApprenticeshipStatusOptions, Model.Status)
<br /><br />


<div class="option-select-label">Alerts</div>
<br />

@RenderFilterOptions("RecordStatus", Model.RecordStatusOptions, Model.RecordStatus)


<br /><br />
<div class="option-select-label">Training Courses</div>
<br />

@RenderFilterOptions("Course", Model.TrainingCourseOptions, Model.Course)


<br /><br />
<div class="option-select-label">Provider</div>
<br />

@RenderFilterOptions("Provider", Model.ProviderOrganisationOptions, Model.Provider)



@functions
{
    private static HtmlString RenderFilterOptions(string groupName, List<KeyValuePair<string, string>> options, List<string> selected)
    {
        var result = new StringBuilder();

        foreach (var option in options)
        {
            var checkedAtt = selected != null && selected.Contains(option.Key) ? "checked=\"checked\"" : "";

            result.Append("<div class=\"option-select\">");

            result.Append("<div class=\"options-container\"");

            result.Append("<label for= \"{groupName}\">");

            result.Append($"<input name=\"{groupName}\" value =\"{option.Key}\" class=\"js-option-select\" id =\"{groupName}-{option.Key}\" type = \"checkbox\" {checkedAtt} aria-controls=\"js-search-results-info\">");
            result.Append(option.Value);
            result.Append("</label>");

            result.Append("</div>");
            result.Append("</div>");
            result.Append("<br/>");
        }

        return new HtmlString(result.ToString());
    }
}
