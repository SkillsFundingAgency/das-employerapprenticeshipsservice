@using System.Globalization

@model OrchestratorResponse<SFA.DAS.EmployerFinance.Web.ViewModels.Transfers.IndexViewModel>

@{
    ViewBag.PageID = "transfers";
    ViewBag.Section = "finance";
    ViewBag.Title = "Manage transfers";
    ViewBag.AnalyticsData.Vpv = $"/finance/transfers";
    ViewBag.ZenDeskLabel = "eas-finance";
    var culture = new CultureInfo("en-GB");
}

<h1 class="heading-xlarge">Manage transfers</h1>

<div class="grid-row">
    <div class="column-two-thirds">
        <h2 class="heading-medium">My transfer finances</h2>
        <p>This is a financial snapshot of what is available.</p>
    </div>
</div>

<div class="grid-row">
    <div class="column-full">
        <div class="finance-highlight">
            <span class="bold-small">
                Your transfer allowance
                <span class="visually-hidden">for</span>
                <abbr title="financial year">FY</abbr> @Model.Data.FinancialYearString
            </span>
            <span class="data-item bold-xlarge">@Model.Data.StartingTransferAllowance.ToString("C0", culture)</span>
        </div>
        <div class="finance-highlight">
            <span class="bold-small">
                Pledges &amp; transfer connections
                <span class="visually-hidden">for</span>
                <abbr title="financial year">FY</abbr> @Model.Data.FinancialYearString
            </span>
            <span class="data-item bold-xlarge">@Model.Data.PledgesAndTransferConnections.ToString("C0", culture)</span>
        </div>
        <div class="finance-highlight">
            <span class="bold-small">
                Remaining transfer funds
                <span class="visually-hidden">for</span>
                <abbr title="financial year">FY</abbr> @Model.Data.FinancialYearString
            </span>
            <span class="data-item bold-xlarge">@Model.Data.RemainingTransferAllowance.ToString("C0", culture)</span>
        </div>
    </div>
</div>

<div class="grid-row">
    <div class="column-two-thirds">
        <h2 class="heading-medium">Transfers allowance information</h2>
        <p><strong>Your transfer allowance for this financial year (FY)</strong></p>
        <p>This is calculated every year on 6 April and shows in your account after 20 April.</p>
        <p>Transfer payments will leave your account before payments for your own apprenticeships.</p>
        <h2 class="heading-medium">Pledges and transfer connections</h2>
        <p>This is an estimate of the amount allocated for your transfers in this financial year. It includes any existing transfer commitments carried over from last year.</p>
        <h2 class="heading-medium">Remaining transfer funds</h2>
        <p>This is an estimate of what remains for you to pledge to transfers in this financial year.</p>
    </div>
</div>

<div class="grid-row">
    @if (Model.Data.CanViewPledgesSection)
    {
        <div class="column-two-thirds">
            <h2 class="heading-medium">My pledges</h2>
            <p>Create a public funding pledge which is shown online so that businesses can apply to you for a transfer of funds.</p>
            <div class="panel panel-border-wide">
                You have <strong>@Model.Data.PledgesCount</strong> transfer pledges.
            </div>
            @if (Model.Data.RenderCreateTransfersPledgeButton)
            {
                <a class="button" href="@Url.LevyTransfersMatchingAccountAction("pledges/create/inform")" id="CreateTransfersPledgeButton">Create a transfers pledge</a>
            }
            <a href="@Url.LevyTransfersMatchingAccountAction("pledges")" class="button button-secondary">View my transfer pledges and applications</a>
        </div>
    }

    @if (Model.Data.CanViewApplySection)
    {
        <div class="column-two-thirds">
            <h2 class="heading-medium">Apply for transfers funding</h2>
            <p>Search transfers funding opportunities and apply for a transfer of funds.</p>
            <div class="panel panel-border-wide">
                You have <strong>@Model.Data.ApplicationsCount</strong> transfer applications.
            </div>
            <div class="button-group">
                <a class="button" href="@Url.LevyTransfersMatchingAction("")" id="ApplyForTransfersButton">Apply for transfer opportunities</a>
                @if (Model.Data.RenderApplicationListButton)
                {
                    <a href="@Url.LevyTransfersMatchingAccountAction("applications")" class="button button-secondary">View applications I've submitted</a>
                }
            </div>
        </div>
    }
</div>

@section breadcrumb {
    <div class="breadcrumbs">
        <ol role="navigation">
            <li><a href="@Url.EmployerAccountsAction("teams")">Home</a></li>
            <li>Your Transfers</li>
        </ol>
    </div>
}

@section pageSpecificJS {
}
