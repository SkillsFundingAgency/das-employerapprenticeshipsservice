@using SFA.DAS.EmployerApprenticeshipsService.Domain
@model SFA.DAS.EmployerApprenticeshipsService.Web.OrchestratorResponse<SFA.DAS.EmployerApprenticeshipsService.Web.Models.EmployerTeamMembersViewModel>

@if (!string.IsNullOrWhiteSpace(Model.Data.SuccessMessage))
{
    <div class="grid-row">
        <div class="column-full">
            <div class="panel panel-info  ">
                @Model.Data.SuccessMessage
            </div>
        </div>
    </div>
}
<div class="grid-row">
    <div class="column-two-thirds">

        <h1 class="heading-xlarge">Manage team members</h1>
        @if (Model.Data.TeamMembers.Count == 0)
        {
            <p>TODO : EMPTY STATE</p>
        }
        else
        {
            <p class="lede">
                Invite members, control what they can do, delete members and cancel or resend invitations.
            </p>
        }
    </div>  
    <div class="column-one-third ">
        <form action="@Url.Action("Invite")" method="get">
            <input class="button nextto-h1" id="addNewUser" type="submit" value="Invite a new member">
        </form>
    </div>
</div>

@if (Model.Data.TeamMembers.Count > 0)
{
    <div class="grid-row">
        <div class="column-full">
            <div class="responsive-table th-nopadding">
                <div class="responsive-thead">
                    <div class="responsive-tr">


                        <div class="responsive-th" scope="col">Team member</div>
                        
                        <div class="responsive-th" scope="col">What they can do</div>
                        <div class="responsive-th" scope="col">Status</div>

                        <div class="responsive-th" scope="col"></div>
                    </div>
                </div>
                <div class="responsive-tbody">

                    @foreach (var teamMember in Model.Data.TeamMembers)
                    {
                        <div class="responsive-tr">
                            <div class="responsive-td">
                                <div>
                                    <span>@teamMember.Name</span>
                                    <br />
                                    <span class="responsive-detail">@teamMember.Email</span>
                                </div>
                                <div class="responsive-inner-caption"></div>
                            </div>
                            <div class="responsive-td">
                                <div class="responsive-inner-caption">What they can do</div>
                                <div>@RoleStrings.ToWhatTheyCanDo(teamMember.Role)</div>
                            </div>
                            <div class="responsive-td">
                                <div class="responsive-inner-caption">Status</div>
                                <div>@InvitationStatusStrings.ToString(teamMember.Status)</div>
                            </div>
                            <div class="responsive-td">
                                <div>
                                    <a aria-label="View details for @teamMember.Name"
                                       - title="View details for @teamMember.Name"
                                       - href="@Url.Action("Review", new { accountId = Model.Data.HashedId, email = teamMember.Email })">View</a>
                                </div>
                                <div class="responsive-inner-caption"></div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
}
